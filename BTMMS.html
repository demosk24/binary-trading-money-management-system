<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cyber Martingale Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Orbitron', sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 30px;
            background: conic-gradient(from 45deg, rgba(119,171,220,1) 0deg, rgba(205,156,171,1) 360deg);
            overflow-x: hidden;
        }
        #calculator{
            border-top: 0.5px solid whitesmoke;
            padding-top: 5px;
        }
        .container {
            background: rgba(0, 0, 0, 0.7);
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 0 30px rgba(173, 255, 47, 0.5);
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }
        .container::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(173,255,47,0.3), transparent);
            animation: glow-pulse 5s infinite ease-in-out;
        }
        @keyframes glow-pulse {
            0% { transform: scale(1); opacity: 0.5; }
            50% { transform: scale(1.2); opacity: 0.8; }
            100% { transform: scale(1); opacity: 0.5; }
        }
        h2 {
            font-weight: 700;
            color: #adff2f;
            text-align: center;
            margin-bottom: 25px;
            text-shadow: 0 0 10px #adff2f, 0 0 20px #adff2f;
            letter-spacing: 2px;
        }

        /* === NEW: Top-right stats === */
        .corner-stats {
            position: relative;
            display: flex;
            gap: 20px;
            font-size: 16px;
            color: #adff2f;
            text-shadow: 0 0 10px #adff2f;
            font-weight: 500;
            margin-bottom: 10px;
        }
        .corner-stats div {
            background: rgba(173, 255, 47, 0.1);
            padding: 8px 14px;
            border-radius: 8px;
            box-shadow: inset 0 0 10px rgba(173, 255, 47, 0.2);
        }

        label {
            display: block;
            margin-bottom: 20px;
            font-weight: 500;
            color: #adff2f;
            text-shadow: 0 0 5px #adff2f;
        }
        input {
            width: 140px;
            padding: 12px;
            border: 2px solid #adff2f;
            border-radius: 8px;
            font-size: 16px;
            background: rgba(255, 255, 255, 0.1);
            color: #e0e0e0;
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        input:focus {
            border-color: #adff2f;
            box-shadow: 0 0 15px #adff2f;
        }
        button {
            padding: 14px 28px;
            margin: 10px 5px;
            font-size: 16px;
            font-weight: 500;
            border: 2px solid #adff2f;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s, color 0.3s;
            letter-spacing: 1px;
            background: transparent;
            color: #adff2f;
            text-transform: uppercase;
            position: relative;
            overflow: hidden;
        }
        button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(173, 255, 47, 0.2);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
            z-index: 0;
        }
        button:hover::before {
            width: 300px;
            height: 300px;
        }
        button:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px #adff2f;
            color: #000;
            background: #adff2f;
        }
        button span { position: relative; z-index: 1; }
        .disabled { opacity: 0.5; cursor: not-allowed; color: #666; }

        .info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
            font-size: 16px;
            color: #e0e0e0;
        }
        .info div {
            background: rgba(173, 255, 47, 0.1);
            padding: 10px;
            border-radius: 6px;
            box-shadow: inset 0 0 10px rgba(173, 255, 47, 0.2);
            display: flex;
            align-items: center;
        }
        .info span {
            font-weight: 500;
            color: #adff2f;
            text-shadow: 0 0 5px #adff2f;
            font-size: 28px;
        }
        .copy-btn {
            padding: 8px 16px;
            font-size: 20px;
            border: 2px solid #adff2f;
            border-radius: 6px;
            background: transparent;
            color: #adff2f;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s, color 0.3s;
            margin-left: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .copy-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px #adff2f;
            color: #000;
            background: #adff2f;
        }
        #log {
            margin-top: 40px;
            border-top: 2px solid #adff2f;
            padding-top: 25px;
            max-height: 400px;
            overflow-y: auto;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 0 20px #adff2f;
        }
        #log h3 {
            font-size: 20px;
            margin-bottom: 15px;
            color: #adff2f;
            text-shadow: 0 0 10px #adff2f;
        }
        #log table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0 10px;
            font-size: 14px;
        }
        #log th, #log td {
            padding: 12px;
            text-align: left;
            background: rgba(173, 255, 47, 0.05);
            border-radius: 6px;
        }
        #log th {
            font-weight: 500;
            color: #adff2f;
            text-shadow: 0 0 5px #adff2f;
            position: sticky;
            top: 0;
            background: rgba(0, 0, 0, 0.8);
        }
        #log tr:hover td { background: rgba(173, 255, 47, 0.2); }
        .loss-text { color: #ff0000 !important; text-shadow: 0 0 5px #ff0000; }
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(0,0,0,0.8);
            color: #adff2f;
            padding: 15px 30px;
            border-radius: 10px;
            box-shadow: 0 0 20px #adff2f;
            display: none;
            z-index: 1000;
            font-size: 16px;
            transition: opacity 0.5s, transform 0.5s;
        }
        @media (max-width: 480px) {
            .container { padding: 20px; }
            button { width: 100%; margin: 10px 0; }
            .info { grid-template-columns: 1fr; }
            .copy-btn { width: 100%; margin-top: 10px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>CYBER MARTINGALE CALCULATOR</h2>

        

        <p style="text-align: center; font-size: 14px; color: #adff2f; text-shadow: 0 0 5px #adff2f;">Neon-Powered Binary Options Strategy | 4 Steps Max</p>
        <label>Initial Balance: <input id="initial" type="number" value="2000"></label>
        <label>Payout Percentage (%): <input id="payout" type="number" value="80" min="0" max="100"></label>
        <button id="start"><span>LAUNCH SYSTEM</span></button>
        
        <div id="calculator" style="display: none; margin-top: 40px;">
            <!-- NEW: Top-right corner stats -->
        <div class="corner-stats">
            <div>üèÜ Wins: <span id="winCount">0</span></div>
            <div>üíÄ Losses: <span id="lossCount">0</span></div>
        </div>
            <div class="info">
                <div style="height: 35px;">Current Step:&nbsp; <span id="step">1</span> / 4</div>
                <div style="height: 35px;">
                    Next Investment:&nbsp;
                    <span id="next" style="font-size: 20px;">0</span>
                    <button style="font-size: 16px;" class="copy-btn" onclick="copyToClipboard('next')">‚ßâ</button>
                </div>
                <div>Current Balance:&nbsp;<span id="balance" style="font-size: 20px;">2000</span></div>
                <div>Total Trades:&nbsp;<span id="trades" style="font-size: 20px;">0</span></div>
                <div>Total Profit/Loss:&nbsp;<span id="pl" style="font-size: 20px;">0</span></div>
                <div>Payout:&nbsp;<span id="payout_display" style="font-size: 20px;">80</span>%</div>
            </div>
            <button id="win"><span>WIN PROTOCOL</span></button>
            <button id="loss"><span>LOSS ALERT</span></button>
            <button id="reset"><span>SYSTEM RESET</span></button>
            <div id="log">
                <h3>NEURAL TRADE LOG:</h3>
                <table id="logTable">
                    <thead>
                        <tr>
                            <th>Event</th>
                            <th>Type</th>
                            <th>Bet</th>
                            <th>P/L</th>
                            <th>Total P/L</th>
                            <th>Balance</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
    </div>
    <div id="toast" class="toast"></div>

    <script>
        let initial_balance, payout_percentage, payout_decimal, multiplier, sum_factor;
        const min_balance_for_calc = 2000, max_steps = 4;
        let min_base_bet, base_bet, current_bet, current_step, total_trades, total_pl, logEntries = [];
        let win_count = 0, loss_count = 0;

        const startBtn = document.getElementById('start');
        const winBtn = document.getElementById('win');
        const lossBtn = document.getElementById('loss');
        const resetBtn = document.getElementById('reset');
        const calculatorDiv = document.getElementById('calculator');
        const stepSpan = document.getElementById('step');
        const nextSpan = document.getElementById('next');
        const balanceSpan = document.getElementById('balance');
        const tradesSpan = document.getElementById('trades');
        const plSpan = document.getElementById('pl');
        const payoutDisplay = document.getElementById('payout_display');
        const logTableBody = document.querySelector('#logTable tbody');
        const toast = document.getElementById('toast');
        const winCountSpan = document.getElementById('winCount');
        const lossCountSpan = document.getElementById('lossCount');

        startBtn.addEventListener('click', init);
        winBtn.addEventListener('click', handleWin);
        lossBtn.addEventListener('click', handleLoss);
        resetBtn.addEventListener('click', reset);
        window.addEventListener('load', loadFromLocalStorage);

        function init() {
            initial_balance = parseFloat(document.getElementById('initial').value) || 2000;
            payout_percentage = parseFloat(document.getElementById('payout').value) || 80;
            if (payout_percentage <= 0 || payout_percentage > 100) return alert('Payout must be between 0 and 100!');
            payout_decimal = payout_percentage / 100;
            multiplier = (1 + payout_decimal) / payout_decimal;
            sum_factor = (Math.pow(multiplier, max_steps) - 1) / (multiplier - 1);
            min_base_bet = min_balance_for_calc / sum_factor;
            reset(false);
            calculatorDiv.style.display = 'block';
            payoutDisplay.textContent = payout_percentage;
            saveToLocalStorage();
        }

        function calcBaseBet() {
            const current_balance = initial_balance + total_pl;
            return Math.max(min_base_bet, current_balance / sum_factor);
        }

        function reset(clearStorage = true) {
            if (clearStorage) { localStorage.clear(); logEntries = []; }
            total_pl = 0; total_trades = 0;
            win_count = 0; loss_count = 0;
            base_bet = calcBaseBet();
            current_bet = base_bet;
            current_step = 1;
            if (clearStorage) renderLog();
            updateDisplay(); enableButtons();
        }

        function updateDisplay() {
            stepSpan.textContent = current_step;
            nextSpan.textContent = Math.ceil(current_bet);
            tradesSpan.textContent = total_trades;
            plSpan.textContent = total_pl.toFixed(2);
            balanceSpan.textContent = (initial_balance + total_pl).toFixed(2);
            winCountSpan.textContent = win_count;
            lossCountSpan.textContent = loss_count;
            checkCanTrade();
        }

        function disableButtons() { winBtn.disabled = lossBtn.disabled = true; winBtn.classList.add('disabled'); lossBtn.classList.add('disabled'); }
        function enableButtons() { winBtn.disabled = lossBtn.disabled = false; winBtn.classList.remove('disabled'); lossBtn.classList.remove('disabled'); }

        function checkCanTrade() {
            const current_balance = initial_balance + total_pl;
            if (current_step > max_steps || current_balance < current_bet) { disableButtons(); return false; }
            enableButtons(); return true;
        }

        function addLogEntry(type, bet, trade_pl, msg = null) {
            const entry = { event: total_trades, type, bet: Math.ceil(bet), pl: trade_pl.toFixed(2), totalPl: total_pl.toFixed(2), balance: (initial_balance + total_pl).toFixed(2), message: msg };
            logEntries.push(entry); renderLogEntry(entry); saveToLocalStorage();
        }

        function renderLogEntry(e) {
            const tr = document.createElement('tr');
            let typeText = e.message ? e.message : e.type;
            if (typeText.toLowerCase().includes('loss')) typeText = `<span class="loss-text">${typeText}</span>`;
            tr.innerHTML = `<td>${e.event}</td><td>${typeText}</td><td>${e.bet}</td><td>${e.pl}</td><td>${e.totalPl}</td><td>${e.balance}</td>`;
            logTableBody.appendChild(tr);
        }

        function renderLog() { logTableBody.innerHTML = ''; logEntries.forEach(renderLogEntry); }

        function handleWin() {
            if (!checkCanTrade()) return;
            total_trades++;
            const profit = current_bet * payout_decimal;
            total_pl += profit;
            win_count++;
            addLogEntry('Win', current_bet, profit);
            base_bet = calcBaseBet(); current_bet = base_bet; current_step = 1;
            updateDisplay(); saveToLocalStorage();
        }

        function handleLoss() {
            if (!checkCanTrade()) return;
            total_trades++;
            const loss = -current_bet;
            total_pl += loss;
            loss_count++;
            addLogEntry('Loss', current_bet, loss);
            current_bet *= multiplier; current_step++;
            updateDisplay(); saveToLocalStorage();
        }

        function saveToLocalStorage() {
            const d = { initial_balance, payout_percentage, total_pl, total_trades, current_bet, current_step, base_bet, logEntries, win_count, loss_count };
            localStorage.setItem('martingale_data', JSON.stringify(d));
        }

        function loadFromLocalStorage() {
            const data = JSON.parse(localStorage.getItem('martingale_data'));
            if (!data) return;
            ({ initial_balance, payout_percentage, total_pl, total_trades, current_bet, current_step, base_bet, logEntries, win_count = 0, loss_count = 0 } = data);
            payout_decimal = payout_percentage / 100;
            multiplier = (1 + payout_decimal) / payout_decimal;
            sum_factor = (Math.pow(multiplier, max_steps) - 1) / (multiplier - 1);
            document.getElementById('initial').value = initial_balance;
            document.getElementById('payout').value = payout_percentage;
            calculatorDiv.style.display = 'block';
            payoutDisplay.textContent = payout_percentage;
            updateDisplay(); renderLog();
        }

        function copyToClipboard(id) {
            const span = document.getElementById(id);
            const text = span.textContent.trim();
            if (!text) return alert('Nothing to copy!');
            navigator.clipboard.writeText(text).then(() => {
                showToast(`Copied: ${text}`);
            }).catch(err => {
                console.error('Clipboard failed', err);
                alert('Copy failed! Please use HTTPS or a secure context.');
            });
        }

        function showToast(message) {
            toast.textContent = message;
            toast.style.display = 'block';
            toast.style.opacity = '1';
            toast.style.transform = 'translateY(0)';
            setTimeout(() => {
                toast.style.opacity = '0';
                toast.style.transform = 'translateY(20px)';
                setTimeout(() => (toast.style.display = 'none'), 500);
            }, 2000);
        }
    </script>
</body>
</html>
